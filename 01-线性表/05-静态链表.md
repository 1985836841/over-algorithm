# 05-静态链表

## 一 静态链表概述

在具备指针概念的语言，如 Go、C、C++中，由于指针的存在，能够灵活的操作内存中的地址和数据。Java、JavaScript 等语言虽然不具备指针，但是其对象引用机制其实也间接具备了指针的很多功能。但对于一些上古语言，如 Basic、Fortran，完全没有指针的概念，链表的实现就会出现困难。

我们可以另辟蹊径，使用数组描述单链表及其元素，即：数组中每个元素可以看做一个结点结构，包含数据 data 与指针 cur：

- data：存储该结点存储的数据
- cur：其实就是数组下标，表示直接后继元素所在数组中的位置

这种用数组的游标描述的链表叫做**静态链表**，也叫链表的**游标实现法**。

静态链表需要预先分配一个较大的空间，但是在做插入和删除时无需移动数组内部的元素，仅需要修改元素的游标即可！故仍具有链式存储结构的优点。

## 二 静态链表的实现解释

### 2.1 静态链表基本结构

静态链表结构如图：

![staticlist](../images/structure/staticlist-01.svg)

解释如下：

- 通常静态链表会将第一个数据元素放到数组下标为 1 的位置中
- 数组索引 0 位置的 cur 存储的是没有存放数据的第一个元素，即下标为 4 的元素
- 其他元素的游标都是直接指向它的下一个元素的下标
- 末尾元素的 cur 可以存放首个有值数据的索引

### 2.2 备用链表

静态链表中，除了数据本身通过游标组成的链表外，还需要有一条连接各个空闲位置的链表，称为备用链表。备用链表的作用是回收数组中未使用或之前使用过（目前未使用）的存储空间，留待后期使用。

也就是说，静态链表使用数组申请的物理空间中，存有两个链表，一条连接数据，另一条连接数组中未使用的空间。

通常，备用链表的表头位于数组下标为 0 的位置，而数据链表的表头位于数组下标为 1 的位置。

### 2.3 静态链表初始化与数据变更

在数据链表未初始化之前，数组中所有位置都处于空闲状态，因此都应被链接在备用链表上，当向静态链表中添加数据时，需提前从备用链表中摘除节点，以供新数据使用。

备用链表摘除节点最简单的方法是摘除 索引 0 的直接后继节点；同样，向备用链表中添加空闲节点也是添加作为 索引 0 新的直接后继节点。因为 索引 0 是备用链表的第一个节点，我们知道它的位置，操作它的直接后继节点相对容易，无需遍历备用链表，耗费的时间复杂度为 O(1)。

### 2.4 静态链表实际演示

假设现在要存储 `{'A', 'B'}`：

第一步：初始化一个静态链表，其实是创建了一个长度为 7 的备用链表，用于存储 5 个数据。如图：

![staticlist](../images/structure/staticlist-02.svg)

第二步：插入元素 'A'，第一个元素位于数组索引 1 上，如图修改备用链表表头索引：

![staticlist](../images/structure/staticlist-03.svg)

第三步：插入元素 'B'：

![staticlist](../images/structure/staticlist-04.svg)

## 三 静态链表的优缺点

优点：在插入和删除时，只需要修改游标，不需要移动元素，改进了顺序存储结构中插入和删除元素需要移动大量元素的缺点

缺点：

- 没有解决连续存储分配带来的表长难以确定问题
- 失去了顺序存储结构随机存取的特性
