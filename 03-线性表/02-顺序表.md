# 02-顺序表

## 一 顺序表概述

顺序表是用一段地址连续的存储单元依次存储线性表的数据元素。

顺序表是线性表在物理上顺序存储的具体实践，如图所示：

![线性表存储](../images/structure/SqList-01.svg)

从图中看出顺序表的特点：

（1）顺序表的逻辑顺序与物理顺序一致，第 i 个元素存储于第 i-1 的物理位置上。
（2）顺序表的所有元素都可以进行随机访问、顺序访问（下标访问）。
（3）顺序表中数据元素的数据类型即是其内部的数组的数据类型。

如果一个数据元素占据了 c 个存储单元(`sizeof(ElemType)`)，那么第 i 个元素的存储位置为：

$LOC(a_i) = LOC(a_1) + i\times c$

通过上述公式，可以随时计算出顺序表中任意位置的地址，不管是最后一个还是第一个，都是相同的时间。

## 二 顺序表的结构与存取

### 2.0 基本结构

由于顺序表的特性，其底层可以采用数组进行存储，这个底层可以是静态数组，也可以是动态申请的数组。

由于底层采用数组，顺序表的插入与删除也和数组的插入删除一样，会造成大量元素的移动。

如果元素插入到最后一个位置，或者删除最后一个位置，那么之前的数据元素无需排序，此时是最好的情况，时间复杂度为 O(1)，因为不需要移动元素。如果是其他情况，则所有的数据元素都要进行移动，这个时间复杂度为 O(n)。

### 2.1 查找效率

根据值查找位置时，如果查找的元素正好是第一位，则数据比较次数为 1，如果是最后第 n 位，则数据比较次数为 n。

若各个元素的查找概率为 $p_i$，找到该元素时数据比较次数为 $c_i$，那么查找的平均比较次数 ACN（Average Comparing Number）为：

$ACN = \sum_{i=1}^n p_i \times c_i$

若仅考虑概率相等的情况，有 $p_1 = p_2 = ... = p_n = 1/n$，且查找第一个元素的比较次数为 1，第二个袁术的比较次数为 2，第一个元素的比较次数为 i，则：

$ACN = \sum_{i=1}^n (\frac{1}{n}) \times i = \frac{1}{n} \sum_{i=1}^n i = (\frac{1}{n})  \times (1+2+...+n) = \frac{1+n}{2}$

即查找要平均比较 $\frac{1+n}{2}$ 个元素。

### 2.2 插入效率

插入到第 i 个元素位置之前（1<=i<=n+1），应该把数组内的 n-i+1ge 元素向后移动一个位置。最好的情形是在最后一位插入，移动 0 个元素，最坏情形是在第一个元素位置插入，移动了 n 个元素，平均移动次数为：

$ACN = \frac{1}{n+1} \sum_{i=1}^{n+1} (n-i+1) = \frac{1}{n+1}  \times \frac{n(n+1)}{2} = \frac{n}{2}$

### 2.3 删除效率

删除最后一个元素，移动次数为 0，删除第一个元素时，移动次数为 n-1，删除第 i 个元素，移动元素为第 i 个到第 n-1 个，平均移动次数为：

$ACN = \frac{1}{n} \sum_{i=1}^{n} (n-i) = \frac{1}{n}  \times \frac{n(n-1)}{2} = \frac{n-1}{2}$

## 三 复杂度总结

| 操作名 | 时间复杂度 | 空间复杂度 |
| ------ | ---------- | ---------- |
| 初始化 | $O(1)$     | $O(1)$     |
| 插入   | $O(n)$     | $O(1)$     |
| 删除   | $O(n)$     | $O(1)$     |
| 查找   | $O(n)$     | $O(1)$     |
| 定位   | $O(1)$     | $O(1)$     |
| 求长度 | $O(1)$     | $O(1)$     |
| 清空   | $O(1)$     | $O(1)$     |
